(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{16:function(e,t,c){},17:function(e,t,c){},39:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),r=c(5),o=c.n(r),s=(c(16),c(3)),i=(c(17),c(8)),u=c(9),l=c(10),h=function(){function e(){Object(u.a)(this,e),this.searchQuery="",this.page=1}return Object(l.a)(e,[{key:"searchQuery",get:function(){return this._searchQuery},set:function(e){return this._searchQuery=e}},{key:"resetPage",value:function(){this.page=1}},{key:"fetchImages",value:function(e){var t="".concat("https://pixabay.com/api/","?image_type=photo&orientation=horizontal&q=").concat(this.searchQuery,"&page=").concat(this.page,"&per_page=12&key=").concat("23232157-ed61124855b6c79290677e8dc");return fetch(t).then((function(e){return e.json()})).then(this.page+=1).catch((function(e){return console.log(e)}))}}]),e}(),j=c(0);function d(e){var t=e.item;return Object(j.jsx)("li",{className:"ImageGalleryItem",children:Object(j.jsx)("img",{className:"ImageGalleryItem-image",src:t.webformatURL,alt:t.tags,"data-large":t.largeImageURL})})}function b(e){var t=e.handleClick;return Object(j.jsx)("button",{type:"button",className:"Button",onClick:t,children:"Load more"})}var f=c(11),m=c.n(f);function O(){return Object(j.jsx)("div",{className:"Loader",children:Object(j.jsx)(m.a,{type:"ThreeDots",color:"#303f9f",height:80,width:80})})}var g=new h,p=function(e){var t=e.searchValue,c=e.openModal,a=Object(n.useState)([]),r=Object(s.a)(a,2),o=r[0],u=r[1],l=Object(n.useState)("idle"),h=Object(s.a)(l,2),f=h[0],m=h[1],p=Object(n.useRef)(!0);Object(n.useEffect)((function(){p.current?p.current=!1:(m("pending"),g.resetPage(),g.searchQuery=t,g.fetchImages().then((function(e){u(e.hits),m("resolved")})).catch((function(e){console.log(e),m("rejected")})))}),[t]),Object(n.useEffect)((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}),[o.length]);return"idle"===f?Object(j.jsx)("div",{}):"pending"===f?Object(j.jsx)(O,{}):"resolved"===f?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("ul",{className:"ImageGallery",onClick:c,children:o.map((function(e){return Object(j.jsx)(d,{item:e},e.id)}))}),0!==o.length?Object(j.jsx)(b,{handleClick:function(){g.fetchImages().then((function(e){u((function(t){return[].concat(Object(i.a)(t),Object(i.a)(e.hits))})),m("resolved")})).catch((function(e){console.log(e),m("rejected")}))}}):Object(j.jsx)("p",{className:"textNotification",children:"Sorry, I didn't find anything"})]}):"rejected"===f?Object(j.jsx)("p",{className:"textNotification",children:"Error!"}):void 0};var v=function(e){var t=e.getFormData,c=Object(n.useState)(""),a=Object(s.a)(c,2),r=a[0],o=a[1];return Object(j.jsx)("header",{className:"Searchbar",children:Object(j.jsxs)("form",{className:"SearchForm",onSubmit:function(e){e.preventDefault(),t(r),o("")},children:[Object(j.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(j.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(j.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:r,onChange:function(e){var t=e.currentTarget.value;o(t)}})]})})},x=document.querySelector("#modal-root");function y(e){var t=e.onClose,c=e.children;function a(e){"Escape"===e.code&&t()}return Object(n.useEffect)((function(){window.addEventListener("keydown",a)}),[]),Object(n.useEffect)((function(){return function(){window.removeEventListener("keydown",a)}})),Object(r.createPortal)(Object(j.jsx)("div",{className:"Overlay",onClick:function(e){e.currentTarget===e.target&&t()},children:Object(j.jsx)("div",{className:"Modal",children:c})}),x)}var N=function(){var e=Object(n.useState)(" "),t=Object(s.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(!1),o=Object(s.a)(r,2),i=o[0],u=o[1],l=Object(n.useState)(""),h=Object(s.a)(l,2),d=h[0],b=h[1];return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(v,{getFormData:function(e){return a(e)}}),Object(j.jsx)(p,{searchValue:c,openModal:function(e){var t=e.target,c=t.dataset;"IMG"===t.nodeName&&(b(c.large),u(!i))}}),i&&Object(j.jsx)(y,{onClose:function(){u(!i)},children:Object(j.jsx)("img",{src:d,alt:""})})]})};o.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(N,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.e53537bb.chunk.js.map