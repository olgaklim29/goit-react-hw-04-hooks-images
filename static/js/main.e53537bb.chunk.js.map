{"version":3,"sources":["services/pixabayApi.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/Loader/Loader.js","components/ImageGallery/ImageGallery.js","components/Searchbar/Searchbar.js","components/Modal/Modal.js","App.js","index.js"],"names":["pixabayApi","this","searchQuery","page","_searchQuery","newQuery","url","fetch","then","response","json","catch","err","console","log","ImageGalleryItem","item","className","src","webformatURL","alt","tags","largeImageURL","Button","handleClick","type","onClick","LoaderCircle","color","height","width","newPixabayApi","ImageGalery","searchValue","openModal","useState","searchResults","setSearchResults","status","setStatus","isFirstRender","useRef","useEffect","current","resetPage","fetchImages","hits","window","scrollTo","top","document","documentElement","scrollHeight","behavior","length","map","el","id","results","prevResults","Searchbar","getFormData","value","setValue","onSubmit","event","preventDefault","autoComplete","autoFocus","placeholder","onChange","currentTarget","modalRoot","querySelector","Modal","onClose","children","handleKeyDown","e","code","addEventListener","removeEventListener","createPortal","target","App","setSearchValue","showModal","setShowModal","modalImg","setModalImg","dataset","nodeName","large","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.e53537bb.chunk.js","sourcesContent":["const BASE_URL = 'https://pixabay.com/api/';\r\nconst KEY = '23232157-ed61124855b6c79290677e8dc';\r\n\r\nexport class pixabayApi {\r\n  constructor() {\r\n    this.searchQuery = '';\r\n    this.page = 1;\r\n  }\r\n\r\n  get searchQuery() {\r\n    return this._searchQuery;\r\n  }\r\n\r\n  set searchQuery(newQuery) {\r\n    return (this._searchQuery = newQuery);\r\n  }\r\n\r\n  resetPage() {\r\n    this.page = 1;\r\n  }\r\n\r\n  fetchImages(searchQuery) {\r\n    const url = `${BASE_URL}?image_type=photo&orientation=horizontal&q=${this.searchQuery}&page=${this.page}&per_page=12&key=${KEY}`;\r\n\r\n    return fetch(url)\r\n      .then(response => response.json())\r\n      .then((this.page += 1))\r\n      .catch(err => console.log(err));\r\n  }\r\n}","import PropTypes from 'prop-types';\r\n\r\nexport default function ImageGalleryItem({ item }) {\r\n  return (\r\n    <li className=\"ImageGalleryItem\">\r\n      <img\r\n        className=\"ImageGalleryItem-image\"\r\n        src={item.webformatURL}\r\n        alt={item.tags}\r\n        data-large={item.largeImageURL}\r\n      />\r\n    </li>\r\n  );\r\n}\r\n\r\nImageGalleryItem.propTypes = {\r\n  item: PropTypes.object,\r\n};","import PropTypes from 'prop-types';\r\n\r\nexport default function Button({ handleClick }) {\r\n  return (\r\n    <button type=\"button\" className=\"Button\" onClick={handleClick}>\r\n      Load more\r\n    </button>\r\n  );\r\n}\r\n\r\nButton.propTypes = {\r\n  handleClick: PropTypes.func,\r\n};","import Loader from 'react-loader-spinner';\r\n\r\nexport default function LoaderCircle() {\r\n  return (\r\n    <div className=\"Loader\">\r\n      <Loader type=\"ThreeDots\" color=\"#303f9f\" height={80} width={80} />\r\n    </div>\r\n  );\r\n}","import PropTypes from 'prop-types';\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport { pixabayApi } from '../../services/pixabayApi';\r\nimport ImageGalleryItem from '../ImageGalleryItem';\r\nimport Button from '../Button';\r\nimport Loader from '../Loader';\r\n\r\nconst newPixabayApi = new pixabayApi();\r\n\r\nconst ImageGalery = ({ searchValue, openModal }) => {\r\n  const [searchResults, setSearchResults] = useState([]);\r\n  const [status, setStatus] = useState('idle');\r\n  const isFirstRender = useRef(true);\r\n\r\n  useEffect(() => {\r\n    if (isFirstRender.current) {\r\n      isFirstRender.current = false;\r\n      return;\r\n    }\r\n    setStatus('pending');\r\n    newPixabayApi.resetPage();\r\n    newPixabayApi.searchQuery = searchValue;\r\n    newPixabayApi\r\n      .fetchImages()\r\n      .then(searchResults => {\r\n        setSearchResults(searchResults.hits);\r\n        setStatus('resolved');\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n        setStatus('rejected');\r\n      });\r\n  }, [searchValue]);\r\n\r\n  useEffect(() => {\r\n    window.scrollTo({\r\n      top: document.documentElement.scrollHeight,\r\n      behavior: 'smooth',\r\n    });\r\n  }, [searchResults.length]);\r\n\r\n  const handleClick = () => {\r\n    newPixabayApi\r\n      .fetchImages()\r\n      .then(results => {\r\n        setSearchResults(prevResults => [...prevResults, ...results.hits]);\r\n        setStatus('resolved');\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n        setStatus('rejected');\r\n      });\r\n  };\r\n\r\n  if (status === 'idle') {\r\n    return <div></div>;\r\n  }\r\n  if (status === 'pending') {\r\n    return <Loader />;\r\n  }\r\n  if (status === 'resolved') {\r\n    return (\r\n      <>\r\n        <ul className=\"ImageGallery\" onClick={openModal}>\r\n          {searchResults.map(el => (\r\n            <ImageGalleryItem key={el.id} item={el} />\r\n          ))}\r\n        </ul>\r\n        {searchResults.length !== 0 ? (\r\n          <Button handleClick={handleClick} />\r\n        ) : (\r\n          <p className=\"textNotification\">Sorry, I didn't find anything</p>\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n  if (status === 'rejected') {\r\n    return <p className=\"textNotification\">Error!</p>;\r\n  }\r\n};\r\n\r\nexport default ImageGalery;\r\n\r\nImageGalery.propTypes = {\r\n  searchValue: PropTypes.string,\r\n  openModal: PropTypes.func,\r\n};","import PropTypes from 'prop-types';\r\nimport { useState } from 'react';\r\n\r\nfunction Searchbar({ getFormData }) {\r\n  const [value, setValue] = useState('');\r\n\r\n  function handleInputChange(event) {\r\n    const { value } = event.currentTarget;\r\n    setValue(value);\r\n  }\r\n\r\n  function handleSubmite(event) {\r\n    event.preventDefault();\r\n    getFormData(value);\r\n    setValue('');\r\n  }\r\n\r\n  return (\r\n    <header className=\"Searchbar\">\r\n      <form className=\"SearchForm\" onSubmit={handleSubmite}>\r\n        <button type=\"submit\" className=\"SearchForm-button\">\r\n          <span className=\"SearchForm-button-label\">Search</span>\r\n        </button>\r\n\r\n        <input\r\n          className=\"SearchForm-input\"\r\n          type=\"text\"\r\n          autoComplete=\"off\"\r\n          autoFocus\r\n          placeholder=\"Search images and photos\"\r\n          value={value}\r\n          onChange={handleInputChange}\r\n        />\r\n      </form>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Searchbar;\r\n\r\nSearchbar.propTypes = {\r\n  getFormData: PropTypes.func,\r\n};","import PropTypes from 'prop-types';\r\nimport { createPortal } from 'react-dom';\r\nimport { useEffect } from 'react';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nexport default function Modal({ onClose, children }) {\r\n  useEffect(() => {\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      window.removeEventListener('keydown', handleKeyDown);\r\n    };\r\n  });\r\n\r\n  function handleKeyDown(e) {\r\n    if (e.code === 'Escape') {\r\n      onClose();\r\n    }\r\n  }\r\n\r\n  function handleBackdropClick(e) {\r\n    if (e.currentTarget === e.target) {\r\n      onClose();\r\n    }\r\n  }\r\n\r\n  return createPortal(\r\n    <div className=\"Overlay\" onClick={handleBackdropClick}>\r\n      <div className=\"Modal\">{children}</div>\r\n    </div>,\r\n    modalRoot,\r\n  );\r\n}\r\n\r\nModal.propTypes = {\r\n  onClose: PropTypes.func,\r\n};","import { useState } from 'react';\nimport './App.css';\nimport ImageGalery from './components/ImageGallery';\nimport Searchbar from './components/Searchbar/';\nimport Modal from './components/Modal/';\n\nfunction App() {\n  const [searchValue, setSearchValue] = useState(' ');\n  const [showModal, setShowModal] = useState(false);\n  const [modalImg, setModalImg] = useState('');\n\n  const getSearchValues = searchValue => setSearchValue(searchValue);\n\n  const toggleModal = () => {\n    setShowModal(!showModal);\n  };\n\n  const openModal = e => {\n    const { dataset, nodeName } = e.target;\n\n    if (nodeName === 'IMG') {\n      setModalImg(dataset.large);\n      setShowModal(!showModal);\n    }\n  };\n\n  return (\n    <div className=\"App\">\n      <Searchbar getFormData={getSearchValues} />\n      <ImageGalery searchValue={searchValue} openModal={openModal} />\n      {showModal && (\n        <Modal onClose={toggleModal}>\n          <img src={modalImg} alt=\"\" />\n        </Modal>\n      )}\n    </div>\n  );\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}